/* controls just about every aspect of panelmultiview panels.
includes general rules as well as rules for specific panels, e.g. tracking protection panel. */

/* hide the stupid outline shown on panels when transitioning from subview to subview */
/* see here: https://searchfox.org/mozilla-central/source/browser/components/customizableui/PanelMultiView.jsm#1037 */
panelview {
    outline: none !important;
}

.panel-arrow {
    margin-top: 2px;
}

/* allow panel height to flex and animate */
@supports -moz-bool-pref("userChrome.panels.allow-height-flex") {
    .panel-viewstack,
    .panel-viewcontainer {
        min-height: revert !important;
    }

    /* make the animation smoother */
    .panel-viewcontainer[panelopen] {
        transition-timing-function: var(--uc-smooth-timing-function) !important;
    }

    panel[panelopen] .panel-viewcontainer {
        will-change: min-height, contents !important;
    }
}

/* without this, the last button in the panel will typically be touching the edge of the panel,
instead of 4px from the edge as it should be.
this connects with .panel-subview-body rules in userChrome.au.css */
.panel-header + .panel-subview-body {
    /* for some reason, the "recently closed tabs" subview doesn't have a separator under the header. simulate one. */
    border-top: 1px solid transparent;
    border-image: linear-gradient(
        to right,
        transparent 4px,
        var(--panel-separator-color) 4px,
        var(--panel-separator-color) calc(100% - 4px),
        transparent calc(100% - 4px)
    );
    border-image-slice: 1;
    margin-block: var(--panel-separator-margin);
    margin-block-end: 0;
    padding-bottom: 0 !important; /* revert the extra padding from the previous rule on certain panels that don't need it */
}

.panel-subview-body:not(:last-child) {
    padding-bottom: 0 !important;
}

/* fixes a similar tiny height animation hiccup when switching panels in the identity popup */
.identity-popup-section,
.identity-popup-security-content,
#identity-popup .panel-view-body-unscrollable {
    max-height: 0 !important;
}

.protections-popup-list {
    -moz-box-flex: 0 !important;
}

.protections-popup-list.empty {
    padding: 16px !important;
}

/* .panel-subview-body + toolbarseparator {
    margin-top: 0 !important;
} */

#widget-overflow panelview[extension] {
    max-width: revert !important;
}

#widget-overflow .webextension-popup-browser {
    background: none !important;
}

#identity-popup[type="arrow"][side="top"],
#identity-popup[type="arrow"][side="bottom"],
#protections-popup[type="arrow"][side="top"],
#protections-popup[type="arrow"][side="bottom"],
#notification-popup[type="arrow"][side="top"],
#notification-popup[type="arrow"][side="bottom"] {
    margin-inline: -20.4px !important;
}

#permission-popup[type="arrow"][side="top"],
#permission-popup[type="arrow"][side="bottom"] {
    margin-inline: -18px !important;
}

#identity-popup[type="arrow"][side="top"][connection="chrome"] {
    margin-inline: -44px !important;
}

#customizationui-widget-panel[viewId="PanelUI-profiler"][type="arrow"][side="top"] {
    margin-inline: -19.4px !important;
    margin-top: -3px !important;
}

#downloadsPanel,
#widget-overflow,
#appMenu-popup,
#customizationui-widget-panel {
    margin-top: -7px !important;
}

#identity-popup,
#protections-popup,
#permission-popup {
    margin-top: -9px !important;
}

#customizationui-widget-panel.bookmarks-toolbar {
    margin-top: revert !important;
}

#extension-notification-panel,
#notification-popup {
    margin-top: -1px !important;
}

panel[type="arrow"][side="top"] {
    margin-top: -7px;
}

#confirmation-hint {
    margin-top: -9px;
}

#BMB_bookmarksPopup {
    margin-top: -12px !important;
}

.subviewbutton {
    min-height: var(--subviewbutton-height) !important;
}

.panel-footer > button:not([disabled]):is(:hover, :focus-visible) {
    background-color: var(
        --button-hover-bgcolor,
        color-mix(in srgb, currentColor 17%, transparent)
    );
}

.panel-footer > button:not([disabled]):hover:active {
    background-color: var(
        --button-active-bgcolor,
        color-mix(in srgb, currentColor 30%, transparent)
    );
}

#protections-popup-content {
    margin-bottom: 0 !important;
    padding-block: 4px !important;
}

.protections-popup-category,
.protections-popup-footer-button {
    border-radius: var(--arrowpanel-menuitem-border-radius) !important;
    margin: 0 !important;
    padding-inline: 6px !important;
    min-height: var(--subviewbutton-height) !important;
}

.protections-popup-category-label {
    margin-inline-start: 6px !important;
}

.protections-popup-category:focus-visible,
.protections-popup-footer-button:focus-visible,
#protections-popup-show-report-stack:focus-visible > .protections-popup-footer-button {
    background-color: var(--button-hover-bgcolor) !important;
}

#protections-popup-footer {
    padding-top: 0 !important;
}

#protections-popup-footer-protection-type-label {
    margin-inline-end: 4px !important;
}

#protections-popup-trackers-blocked-counter-box {
    padding-inline-end: 6px !important;
    margin-inline-end: 4px !important;
}

#protections-popup-category-list {
    margin-top: -10px !important;
}

#protections-popup-not-blocking-section-header {
    padding-inline: 2px !important;
    padding-block: 10px 2px !important;
    margin-inline: auto !important;
    height: 34px !important;
}

#protections-popup-blocking-section-header,
#protections-popup-not-found-section-header {
    padding-block: 14px 6px !important;
    height: 34px !important;
    margin-inline: auto !important;
}

#protections-popup-not-blocking-section-description,
#protections-popup-not-blocking-section-why {
    outline: none !important;
    padding: 3.75px 4px !important;
    height: revert !important;
}

#protections-popup-not-blocking-section-why:hover {
    color: var(--panel-color);
}

:is(#protections-popup-not-blocking-section-description, #protections-popup-not-blocking-section-why, #protections-popup-blocking-section-header, #protections-popup-not-found-section-header):not([hidden="true"]) {
    display: flex !important;
}

#protections-popup-not-blocking-section-why {
    border-radius: var(--arrowpanel-menuitem-border-radius) !important;
}

#protections-popup-siteNotWorkingView-body,
.protections-popup-tp-switch-label-box,
.protections-popup-tp-switch-box {
    min-height: 40px !important;
    -moz-box-pack: center;
    position: relative;
}

#protections-popup-tp-switch-section:not([short])
    > :is(.protections-popup-tp-switch-label-box, .protections-popup-tp-switch-box) {
    min-height: 30px !important;
}

.protections-popup-category[disabled="true"] {
    background: none !important;
}

.protections-popup-description,
.protections-popup-list {
    font-size: 12px;
}

.popup-notification-warning:empty,
.addon-webext-perm-list:empty {
    display: none !important;
}

.panel-footer.popup-notification-button-container {
    margin-inline: calc(var(--menupopup-inner-padding-magnitude) * 2) !important;
    margin-block: calc(var(--menupopup-inner-padding-magnitude) * 2) !important;
    gap: calc(var(--menupopup-inner-padding-magnitude) * 2) !important;
}

.panel-footer.popup-notification-button-container > .popup-notification-button {
    margin: 0 !important;
    border-radius: var(--arrowpanel-menuitem-border-radius) !important;
    flex: 1 !important;
    font-weight: normal !important;
    order: revert !important;
}

.popup-notification-button-container > button:not([disabled]):is(:hover:active, [open]) {
    background-color: var(--button-active-bgcolor) !important;
}

.popup-notification-button-container > button:not([disabled], :active):is(:hover, :focus-visible) {
    background-color: var(--button-hover-bgcolor) !important;
}

.popup-notification-button-container > button {
    background-color: var(--button-hover-bgcolor) !important;
    border: 1px solid transparent !important;
    padding: 7.25px 16px !important;
}

.popup-notification-button-container > button[disabled] {
    background-color: var(--button-hover-bgcolor) !important;
    opacity: 0.5;
}

.popup-notification-button-container > button[disabled] .button-text {
    color: white;
}

.popup-notification-button-container
    > :is(.popup-notification-secondary-button, .popup-notification-dropmarker):not([disabled]) {
    background-color: transparent !important;
    border-color: var(--button-hover-bgcolor) !important;
}

.popup-notification-button-container
    > :is(.popup-notification-secondary-button, .popup-notification-dropmarker):not([disabled], :active):is(:hover, :focus-visible) {
    background-color: var(--button-hover-bgcolor) !important;
    border-color: transparent !important;
}

.popup-notification-button-container
    > :is(.popup-notification-secondary-button, .popup-notification-dropmarker):not([disabled]):is(:hover:active, [open]) {
    background-color: var(--button-active-bgcolor) !important;
    border-color: transparent !important;
}

.popup-notification-button-container
    > .popup-notification-primary-button:not([disabled], :active):is(:hover, :focus-visible) {
    background-color: var(--button-primary-hover-bgcolor) !important;
}

.popup-notification-button-container
    > .popup-notification-primary-button:not([disabled]):hover:active {
    background-color: var(--button-primary-active-bgcolor) !important;
}

.panel-info-button[checked]:not([disabled]):is(:hover, :focus-visible) {
    background-color: var(--arrowpanel-dimmed-even-further) !important;
}

#protections-popup-info-button {
    margin-inline-end: 10px !important;
}

#protections-popup .panel-footer {
    gap: var(--vertical-section-padding) !important;
    margin-top: 4px !important;
}

#protections-popup .panel-footer > button {
    border-radius: var(--arrowpanel-menuitem-border-radius) !important;
    flex: 1 !important;
    font-weight: normal !important;
    border-inline: 0 !important;
}

.panel-footer.popup-notification-button-container
    > .popup-notification-secondary-button:not([dropmarkerhidden="true"]) {
    margin-inline-end: calc(0px - var(--menupopup-inner-padding-magnitude)) !important;
    border-start-end-radius: 0 !important;
    border-end-end-radius: 0 !important;
    border-inline-end: 0 !important;
}

.panel-footer.popup-notification-button-container
    > .popup-notification-secondary-button:not([dropmarkerhidden="true"])
    + toolbarseparator {
    border-color: var(--button-hover-bgcolor) !important;
    margin-inline: calc(0px - var(--menupopup-inner-padding-magnitude)) !important;
}

.panel-footer.popup-notification-button-container > .popup-notification-dropmarker {
    margin-inline-start: calc(0px - var(--menupopup-inner-padding-magnitude)) !important;
    border-start-start-radius: 0 !important;
    border-end-start-radius: 0 !important;
    border-inline-start: 0 !important;
    flex: 0 !important;
    min-width: 32px !important;
    padding: 0 !important;
    padding-inline-end: 0.5px !important;
}

popupnotificationcontent {
    margin-block: 0 !important;
}

.popup-notification-body input,
#protections-popup-sendReportView-collection-comments,
#protections-popup-sendReportView-collection-url {
    padding: 5.5px !important;
    border-radius: var(--context-menuitem-border-radius) !important;
    border: 1px solid transparent !important;
    appearance: none !important;
    outline: none !important;
    background-color: var(--desaturate-dimmed) !important;
    box-shadow: none !important;
    color: inherit !important;
}

#protections-popup-sendReportView-collection-comments {
    min-height: 55px;
}

.protections-popup-sendReportView-collection-section:last-of-type {
    margin-bottom: 0 !important;
}

.popup-notification-body input:where(:-moz-focusring),
#protections-popup-sendReportView-collection-url:where(:-moz-focusring) {
    background-color: var(--desaturate-dimmed-further) !important;
}

.popup-notification-body .popup-notification-invalid-input {
    background-color: var(--uc-warning-background) !important;
}

.password-notification-label,
#password-notification-visibilityToggle {
    margin-block-start: 8px !important;
}

#password-notification-username-dropmarker {
    height: 100% !important;
    margin: 0 !important;
    width: var(--subviewbutton-height) !important;
    opacity: 0.6 !important;
    -moz-box-pack: center !important;
}

#password-notification-username-dropmarker:is(:hover, :focus-visible) {
    opacity: 1 !important;
}

panel {
    --panel-separator-color: var(--desaturate-dimmed) !important;
}

popupnotification checkbox .checkbox-check {
    appearance: none !important;
    min-width: 10px !important;
    min-height: 10px !important;
    width: 14px !important;
    height: 14px !important;
    margin-inline-end: 4px !important;
    padding: 0.5px;
    border-radius: 2px !important;
    margin: 0;
    background-position: center;
    background-repeat: no-repeat;
}

popupnotification checkbox .checkbox-check[checked] {
    background-image: url(chrome://userchrome/content/check.svg);
    -moz-context-properties: fill, fill-opacity !important;
    fill: currentColor !important;
}

.addon-installed-notification-content > checkbox,
popupnotification .popup-notification-body > .popup-notification-checkbox {
    margin-inline-start: 0 !important;
}

popupnotification .popup-notification-checkbox .checkbox-check {
    width: 14px !important;
    height: 14px !important;
    background-position: center !important;
    background-repeat: no-repeat !important;
    background-size: contain !important;
}

popupnotification .popup-notification-checkbox .checkbox-check[checked] {
    background-image: url(chrome://userchrome/content/check.svg) !important;
    -moz-context-properties: fill, fill-opacity !important;
    fill: currentColor !important;
}

.popup-notification-checkbox > .checkbox-label-box > .checkbox-label {
    margin-block: 0 !important;
    opacity: revert !important;
    color: var(--panel-description-color);
}

#eom-allow-auto-updates .subviewradio {
    background: none !important;
}

.subviewradio > .radio-check {
    border-color: var(--uc-checkbox-border-color) !important;
    background-color: var(--uc-checkbox-unchecked-bgcolor) !important;
}

.subviewradio > .radio-check[selected] {
    border: 1px solid var(--uc-checkbox-checked-border-color) !important;
    background-color: var(--uc-checkbox-checked-bgcolor) !important;
    list-style-image: url(chrome://userchrome/content/radio.svg);
    fill: currentColor;
    -moz-context-properties: fill, fill-opacity;
}

.subviewradio:is(:hover, [focused="true"]) .radio-check {
    background-color: var(--uc-checkbox-unchecked-hover-bgcolor) !important;
}

.subviewradio:not([focused="true"]):hover:active .radio-check {
    background-color: var(--uc-checkbox-unchecked-active-bgcolor) !important;
}

.subviewradio:is(:hover, [focused="true"]) .radio-check[selected] {
    background-color: var(--uc-checkbox-checked-hover-bgcolor) !important;
}

.subviewradio:not([focused="true"]):hover:active .radio-check[selected] {
    background-color: var(--uc-checkbox-checked-active-bgcolor) !important;
}

popupnotification progress {
    appearance: none;
    border: 1px solid transparent;
    margin-block: 3px !important;
    margin-inline-start: 0 !important;
    border-radius: 100px;
    height: 8px;
    background-color: var(--arrowpanel-dimmed);
    overflow: hidden;
}

popupnotification progress[paused] {
    background-color: var(--desaturate-dimmed);
}

popupnotification progress:not([value="0"])::-moz-progress-bar {
    margin: 0;
    height: 100%;
}

popupnotification progress::-moz-progress-bar {
    background-color: var(--toolbarbutton-icon-fill-attention);
    background-image: none;
}

popupnotification progress[paused]::-moz-progress-bar {
    background-color: var(--desaturate-dimmed-further);
}

/* "downloading and verifying add-on..." goes above the addon install progress bar */
#addon-progress-notification .popup-notification-origin.header + .popup-notification-description {
    margin-block: 3px !important;
}

#protections-popup-message .text-link,
.popup-notification-learnmore-link {
    text-decoration: none !important;
}

#protections-popup-sendReportView .text-link,
#protections-popup-tp-switch-breakage-link,
#protections-popup-tp-switch-breakage-fixed-link {
    margin-block: 2px 0 !important;
    text-decoration: none !important;
}

:is(.popup-notification-learnmore-link, panel .text-link):is(:hover, :focus-visible),
#protections-popup .text-link:is(:hover, :focus-visible) {
    text-decoration: underline !important;
}

.popup-subitem {
    margin-inline-start: 27px !important;
    margin-top: 1px;
}

.permission-popup-permission-remove-button {
    appearance: none;
    margin: 0;
    margin-inline-start: 2px;
    border-width: 0;
    min-width: 0;
    padding: 2px !important;
    background-color: var(--button-bgcolor) !important;
    color: inherit !important;
    opacity: 1 !important;
    outline: none !important;
    box-shadow: none !important;
    border-radius: var(--context-menuitem-border-radius) !important;
    -moz-box-pack: center !important;
    -moz-box-align: center !important;
}

.permission-popup-permission-remove-button > .button-box {
    margin-inline: 1px !important;
    border-radius: 2px;
    width: 16px;
    height: 16px;
}

.permission-popup-permission-remove-button:is(:hover, :focus-visible) > .button-box {
    background-color: var(--arrowpanel-dimmed);
}

.permission-popup-permission-remove-button > .button-box > .button-icon {
    width: 16px !important;
    height: 16px !important;
    padding: 0 !important;
    list-style-image: url(chrome://userchrome/content/textbox-clear.svg) !important;
    -moz-context-properties: fill, fill-opacity !important;
    fill-opacity: 0 !important;
}

.permission-popup-permission-remove-button:is(:hover, :focus-visible) {
    background-color: var(--button-hover-bgcolor) !important;
}

.permission-popup-permission-remove-button:hover:active {
    background-color: var(--button-active-bgcolor) !important;
}

.permission-popup-permission-item > .popup-subitem {
    fill-opacity: 0.8 !important;
}

.permission-popup-permission-label-subitem,
#permission-popup-storage-access-permission-list-hint,
#permission-popup-storage-access-permission-learn-more {
    margin-inline-start: 24px !important;
}

/* hides update popups. i use a script for this now, updateNotificationSlayer.uc.js. use that instead, it's MUCH better. */
/* #appMenu-notification-popup {
    display: none !important;
} */

/* popupnotification:is([popupid="update-available"]) {
    display: none !important;
} */

.subviewbutton-back > .toolbarbutton-icon {
    width: 16px;
    height: 16px;
}

.panel-header > .subviewbutton-back,
.panel-header > .subviewbutton-back > .toolbarbutton-icon {
    -moz-context-properties: fill, fill-opacity !important;
    fill-opacity: 0.6;
}

.panel-header > .subviewbutton-back:is(:hover, :focus-visible),
.panel-header > .subviewbutton-back:is(:hover, :focus-visible) > .toolbarbutton-icon {
    fill-opacity: 0.8;
}

#plugins-notification-icon[extraAttr="inactive"] > .plugin-icon {
    fill: currentColor !important;
}

#plugins-notification-icon[extraAttr="inactive"] > #plugin-icon-badge {
    fill-opacity: 1;
}

.identity-popup-security-connection {
    /* background-position: 2em 40% !important; */
    background-size: 18px auto !important;
    font-size: 1.1em;
}

#identity-popup-securityView .identity-popup-connection-secure.security-view,
#identity-popup-securityView .identity-popup-connection-not-secure.security-view {
    margin-inline-start: 28px !important;
}

#identity-popup-securityView .identity-popup-security-connection {
    background-position: 5px center !important;
    padding-block: 4px !important;
    margin-block: 5px 0 !important;
    margin-inline: 3px !important;
}

#identity-popup-securityView .identity-popup-security-connection description {
    margin-inline-start: 28px !important;
}

#identity-popup-mainView .identity-popup-security-connection {
    background-position: 5px center !important;
    min-height: 34px !important;
    -moz-box-pack: center !important;
}

#identity-popup .subviewbutton-nav {
    padding-block: 0 !important;
}

#identity-popup-security-button {
    margin-bottom: revert !important;
}

.identity-popup-security-connection.identity-button {
    width: auto !important;
    -moz-box-flex: 1 !important;
}

#identity-popup-mainView .identity-popup-security-connection > hbox {
    /* display: flex !important;
    flex-flow: column nowrap !important;
    justify-content: center !important; */
    -moz-box-align: center !important;
    margin-inline: 3px !important;
}

#identity-popup-mainView .identity-popup-security-connection description {
    margin-inline-start: 28px !important;
}

#identity-popup-mainView .identity-popup-security-connection .upgraded {
    font-size: 0.8em !important;
    margin-inline-start: 0 !important;
}

#identity-popup[httpsonlystatus="upgraded"]
    .identity-popup-security-connection
    description:not(.upgraded) {
    font-size: 0.91em !important;
}

#identity-popup-security-description {
    font-size: 12px !important;
}

#identity-popup[connection="chrome"] .identity-popup-security-connection {
    background-image: url(chrome://branding/content/about-logo.png) !important;
}

#identity-popup[connection="file"] .identity-popup-security-connection {
    background-image: url(chrome://userchrome/content/notifications/persistent-storage.svg) !important;
}

#identity-popup[connection^="secure"] .identity-popup-security-connection {
    background-image: url(chrome://userchrome/content/skin/connection-secure.svg) !important;
    -moz-context-properties: fill;
    fill: var(--secure-color) !important;
}

#identity-popup[connection="secure-cert-user-overridden"] .identity-popup-security-connection {
    background-image: url(chrome://global/skin/icons/security-warning.svg) !important;
    fill: unset !important;
    -moz-context-properties: fill !important;
}

#identity-popup[connection="https-only-error-page"] .identity-popup-security-connection,
#identity-popup[connection="cert-error-page"] .identity-popup-security-connection,
#identity-popup[connection="net-error-page"] .identity-popup-security-connection {
    background-image: url(chrome://userchrome/content/warning.svg) !important;
}

#identity-popup[connection="extension"] .identity-popup-security-connection {
    background-image: url(chrome://userchrome/content/material/extension.svg) !important;
    background-size: 16px auto !important;
    fill: currentColor !important;
}

.identity-button .identity-popup-connection-not-secure,
#identity-popup[connection="secure-cert-user-overridden"]
    [when-connection~="secure-cert-user-overridden"] {
    color: inherit !important;
}

#identity-popup[connection="secure"]
    .identity-popup-connection-secure.security-view[when-connection~="secure"] {
    color: var(--secure-text-color) !important;
}

#identity-popup[ciphers="weak"]
    .identity-popup-security-connection
    .identity-popup-connection-not-secure.security-view[when-connection~="not-secure"],
#identity-popup[mixedcontent~="passive-loaded"][isbroken]
    .identity-popup-security-connection
    .identity-popup-connection-not-secure.security-view[when-connection~="not-secure"] {
    color: var(--low-warning-text-color) !important;
}

/* url bar popups */
#identity-popup,
#protections-popup,
.popup-notification-panel {
    fill: currentColor;
    -moz-context-properties: fill, fill-opacity, opacity, stroke, stroke-opacity !important;
}

#protections-popup-mainView-panel-header {
    min-height: 44px !important;
    padding-block: 8px 4px !important;
}

#protections-popup-main-header-label {
    display: -moz-box;
    height: auto !important;
    -moz-box-align: center !important;
    -moz-box-pack: center !important;
}

#protections-popup[toast]
    #protections-popup-mainView
    > :not(#protections-popup-mainView-panel-header-section),
#protections-popup[toast] #protections-popup-main-header-label {
    display: none;
}

#protections-popup[toast] #messaging-system-message-container {
    border: none !important;
}

#protections-popup[toast] {
    --arrowpanel-background: var(--confirmation-hint-bgcolor);
    --arrowpanel-border-color: var(--confirmation-hint-border-color);
    --arrowpanel-color: var(--confirmation-hint-color);
}

#protections-popup[toast] #protections-popup-mainView-panel-header {
    min-height: 30px !important;
}

#protections-popup-mainView-panel-header-span {
    margin-inline-start: 24px !important;
    margin-block: 0 !important;
}

#protections-popup #messaging-system-message-container {
    margin: var(--panel-separator-margin) !important;
    margin-bottom: 0 !important;
    transition: margin-bottom 0.35s !important;
}

#protections-popup #messaging-system-message-container[disabled] {
    margin-bottom: -259px !important;
}

#protections-popup-mainView-panel-header-section + toolbarseparator {
    margin-top: 0 !important;
    transition: border-color 0.35s !important;
}

#protections-popup:not([infoMessageShowing])
    #protections-popup-mainView-panel-header-section
    + toolbarseparator {
    border-color: transparent !important;
}

#protections-popup-message {
    height: calc(100% - 10px) !important;
    transition: mask 0.35s, opacity 0.2s !important;
    mask-image: linear-gradient(0deg, transparent, black 12px);
    mask-position: center calc(100% + 0px) !important;
    margin-bottom: 0 !important;
}

#protections-popup #messaging-system-message-container[disabled] #protections-popup-message {
    mask-size: 260px !important;
    mask-position: center calc(100% - 259px) !important;
    transition: mask 0.35s, opacity 0.75s !important;
}

#protections-popup-message .whatsNew-message-body {
    margin-bottom: calc(10px + var(--vertical-section-padding)) !important;
}

#PanelUI-whatsNew .whatsNew-message-title,
#protections-popup-message .whatsNew-message-title {
    font-weight: var(--uc-font-weight-bold, 600) !important;
}

#protections-popup-message .text-link {
    color: var(--lwt-popup-brighttext-url-color) !important;
    font-weight: var(--uc-font-weight-bold, 600) !important;
}

.protections-popup-tp-switch:not([enabled]) {
    background: var(--protections-popup-switch-off-background) !important;
    border-color: transparent !important;
}

.protections-popup-tp-switch[enabled] {
    background: var(--protections-popup-switch-on-background) !important;
    border-color: transparent !important;
}

.protections-popup-tp-switch:not([enabled]):is(:hover, :focus-visible) {
    border: 1px solid var(--protections-popup-switch-off-hover-border-custom) !important;
    background: var(--protections-popup-switch-off-hover-background-custom) !important;
}

.protections-popup-tp-switch[enabled]:is(:hover, :focus-visible) {
    border: 1px solid var(--protections-popup-switch-on-hover-border-custom) !important;
    background: var(--protections-popup-switch-on-hover-background-custom) !important;
}

.protections-popup-tp-switch:not([enabled]):hover:active {
    background: var(--protections-popup-switch-off-active-background-custom) !important;
}

.protections-popup-tp-switch[enabled]:hover:active {
    background: var(--protections-popup-switch-on-active-background-custom) !important;
}

#identity-popup-mainView .subviewbutton-nav[disabled="true"]::after {
    display: none !important;
}

#identity-popup .subviewbutton-nav::after {
    margin-inline-end: 2px !important;
}

#identity-popup-security-expander > .button-box {
    border: none !important;
}

#identity-popup-security-description > :is(description, label, button) {
    margin-inline: 34px !important;
    padding-inline: 0 !important;
    margin-block: 3px 6px !important;
}

#identity-popup-security-description > .identity-popup-warning-box {
    font-weight: var(--uc-font-weight-semibold, 500) !important;
}

#identity-popup-mainView .identity-popup-warning-box {
    font-size: 1em !important;
}

#identity-popup-securityView-body > .identity-popup-warning-box {
    font-weight: var(--uc-font-weight-semibold, 500) !important;
    background: var(--uc-warning-background);
    padding: 4px !important;
    margin-inline: 24px 1px !important;
    border-radius: 3px;
    font-size: 1.1em !important;
}

#identity-popup-securityView-body > .identity-popup-warning-box.identity-popup-warning-yellow {
    background: var(--low-warning-background);
}

#identity-popup-securityView-body > .identity-popup-warning-box.identity-popup-warning-gray {
    background: var(--arrowpanel-faint);
}

:root[lwt-popup-brighttext] panel .identity-popup-warning-yellow .text-link {
    color: var(--low-warning-text-color) !important;
}

.identity-popup-section {
    -moz-box-align: center;
}

.identity-popup-expander {
    width: min-content !important;
    padding: 10px !important;
    box-shadow: none !important;
    list-style-image: url(chrome://userchrome/content/menu-arrow-big.svg) !important;
    transform: none !important;
    background: none !important;
}

.identity-popup-expander:-moz-locale-dir(ltr) {
    transform: scaleX(-1);
}

.identity-popup-expander .button-icon {
    width: 14px !important;
    height: 14px !important;
}

.identity-popup-expander .button-box {
    border-radius: var(--arrowpanel-menuitem-border-radius);
    width: 32px;
    height: 32px;
}

.identity-popup-expander:is(:hover, :focus-visible) .button-box {
    background-color: var(--panelview-toolbarbutton-hover-bgcolor);
}

.identity-popup-expander:hover:active .button-box {
    background-color: var(--panelview-toolbarbutton-active-bgcolor);
}

#identity-popup-multiView .panel-button {
    appearance: none !important;
    color: currentColor !important;
    fill: currentColor !important;
    background-color: var(--arrowpanel-dimmed) !important;
    border-radius: 3px !important;
    padding: 0.15em 0.4em !important;
    margin-inline: 24px 1px !important;
    min-height: var(--subviewbutton-height) !important;
    align-self: center !important;
}

#identity-popup-multiView .panel-button:not([disabled]):is(:hover:active, [open]) {
    background-color: var(--arrowpanel-dimmed-even-further) !important;
}

#identity-popup-multiView .panel-button:not([disabled]):is(:hover, :focus-visible) {
    background-color: var(--arrowpanel-dimmed-further) !important;
}

#identity-popup-multiView .panel-button:not([disabled]) {
    background-color: var(--arrowpanel-dimmed) !important;
}

#identity-popup-multiView .panel-button[disabled="true"] {
    opacity: 0.6 !important;
    pointer-events: none !important;
}

#identity-popup-securityView-body {
    display: flex;
    flex-flow: column nowrap;
    gap: 8px;
    font-weight: var(--uc-font-weight-thin, 400);
    font-size: 12px;
}

#identity-popup-securityView-body > button {
    width: -moz-available;
    min-height: var(--subviewbutton-height) !important;
}

#identity-popup-securityView-body > :is(description, label, button) {
    margin-block: 0 !important;
    margin-inline-start: 28px !important;
}

#identity-popup-securityView-body > description#identity-popup-content-verifier {
    margin-top: 0 !important;
}

#identity-popup-securityView-body > description#identity-popup-content-owner {
    margin-bottom: revert !important;
    padding-inline-start: 8px;
    margin-top: 0 !important;
}

#identity-popup-securityView-body > description#identity-popup-content-supplemental {
    margin-top: revert !important;
    padding-inline-start: 16px;
}

panel .header,
#identity-popup-security-description > description {
    font-weight: var(--uc-font-weight-bold, 600) !important;
}

.panel-view-body-unscrollable {
    overflow-y: scroll !important;
}

#notification-popup menulist {
    color: var(--notification-menu-color) !important;
}

.webRTC-selectDevice-selector-container label {
    margin-block: 0 !important;
}

#webRTC-all-windows-shared {
    font-size: 10px !important;
    margin-block: 10px 4px !important;
}

#webRTC-previewWarning {
    font-size: 10px !important;
    margin-block: 4px !important;
}

#webRTC-previewWarning-learnMore {
    margin-block: 0 4px !important;
}

#downloadsPanel-mainView {
    min-width: revert !important;
    width: revert !important;
}

#downloadsListBox {
    width: 56ch !important;
    margin: var(--arrowpanel-menuitem-inline-margin) 0 !important;
}

#downloadsRichListBox {
    padding: var(--arrowpanel-menuitem-inline-margin) 0 !important;
}

#emptyDownloads {
    padding-block: 1.25em !important;
    padding-inline: 16px 20px !important;
}

#downloadsPanel-mainView {
    padding: 0 !important;
}

#downloadsFooterButtons:not([hidden]) {
    display: flex !important;
    flex-flow: row nowrap;
    padding-block: var(--arrowpanel-menuitem-inline-margin) !important;
    margin: 0 var(--arrowpanel-menuitem-inline-margin) !important;
    border-top: 1px solid var(--panel-separator-color) !important;
    gap: var(--arrowpanel-menuitem-inline-margin) !important;
    --button-hover-bgcolor: var(--in-content-button-background);
    --button-active-bgcolor: var(--in-content-button-background-hover);
}

#downloadsFooterButtons > toolbarseparator {
    display: none !important;
}

#downloadsFooterButtons > button {
    border-radius: var(--arrowpanel-menuitem-border-radius) !important;
    margin: 0 !important;
    flex-grow: 1;
    padding: 6px 8px !important;
    -moz-context-properties: fill, fill-opacity;
    fill: currentColor;
}

#downloadsFooterButtons > button > .button-box {
    display: flex !important;
    flex-flow: row nowrap;
    align-items: center;
}

#downloadsFooterButtons > button .button-icon {
    margin-inline: 0 6px;
    width: 16px;
    height: 16px;
}

#downloadsHistory {
    list-style-image: url(chrome://userchrome/content/skin/sort.svg);
}

#clearDownloadsPanel {
    list-style-image: url(chrome://userchrome/content/delete.svg);
}

richlistitem.download-state > toolbarseparator {
    visibility: collapse !important;
}

richlistitem.download-state {
    border-radius: var(--arrowpanel-menuitem-border-radius) !important;
    margin: 0 !important;
    padding: 0 !important;
    margin: 0 var(--arrowpanel-menuitem-inline-margin) !important;
    border: 0 !important;
    outline: 0 !important;
    background: none !important;
}

richlistitem.download-state {
    min-height: 60px !important;
    height: 60px !important;
    -moz-box-align: center !important;
    border: none !important;
}

.downloadMainArea {
    border-radius: var(--arrowpanel-menuitem-border-radius) !important;
}

richlistitem.download-state .downloadMainArea {
    padding-inline: 12px 4px !important;
}

.downloadsPanelFooterButton:hover {
    outline: none !important;
}

richlistitem.download-state[state="1"][exists] .downloadMainArea:hover,
richlistitem.download-state:not([verdict]) > .downloadButton:hover,
richlistitem.download-state[verdict]:hover {
    background-color: unset !important;
}

richlistitem.download-state[state="1"][exists]:is(:hover, :focus-within),
richlistitem.download-state:is([verdict], .openWhenFinished):is(:hover, :focus-within) {
    background: var(--download-button-hover-bg) !important;
}

panel richlistitem.download-state[state="1"]:not([exists]) .downloadTarget {
    color: var(--panel-description-color);
}

panel richlistitem.download-state .downloadDetails {
    opacity: 1 !important;
    color: var(--panel-description-color);
}

#downloadsListBox .downloadContainer {
    min-height: 60px !important;
}

richlistitem.download-state > .downloadButton {
    min-height: 60px !important;
    min-width: 60px !important;
    height: auto !important;
    width: auto !important;
    box-sizing: content-box !important;
    margin: 0 !important;
    padding: 0 !important;
    background: none !important;
    border-radius: 0 !important;
    -moz-box-align: center !important;
    -moz-box-pack: center !important;
}

richlistitem.download-state > .downloadButton:is(:hover, :focus-visible) .button-box {
    background: var(--in-content-button-background-hover) !important;
}

richlistitem.download-state > .downloadButton:hover:active .button-box {
    background: var(--in-content-button-background-active) !important;
}

richlistitem.download-state > .downloadButton .button-box {
    max-width: 34px !important;
    height: 34px !important;
    border-radius: var(--arrowpanel-menuitem-border-radius) !important;
    padding: 0 !important;
}

richlistitem.download-state > .downloadButton .button-box .button-icon {
    width: 19px !important;
    height: auto !important;
}

.downloadIconShow .button-box .button-icon {
    list-style-image: url(chrome://userchrome/content/material/places/folder.svg) !important;
}

.downloadIconCancel .button-box .button-icon {
    list-style-image: url(chrome://userchrome/content/close-big.svg) !important;
}

.downloadIconRetry .button-box .button-icon {
    list-style-image: url(chrome://userchrome/content/skin/reload.svg) !important;
}

richlistitem.download-state > .downloadButton.downloadIconCancel .button-box .button-icon {
    width: 21px !important;
}

.downloadProgress {
    appearance: none !important;
    margin: 3px 0 -2px 0 !important;
    border: 1px solid transparent !important;
    border-radius: 100px !important;
    height: 8px !important;
    background-color: var(--arrowpanel-dimmed) !important;
    overflow: hidden !important;
}

.downloadProgress[paused] {
    background-color: var(--desaturate-dimmed) !important;
}

.downloadProgress:not([value="0"])::-moz-progress-bar {
    margin: 0 !important;
    height: 100% !important;
}

.downloadProgress::-moz-progress-bar {
    background-color: var(--toolbarbutton-icon-fill-attention) !important;
    background-image: none !important;
}

.downloadProgress[paused]::-moz-progress-bar {
    background-color: var(--desaturate-dimmed-further) !important;
}

/* just for downloads in the places organizer */
@-moz-document url-prefix("chrome://browser/content/places/places.xhtml")
{
    richlistitem.download-state:is(:hover, :focus-within) {
        background: hsl(230, 5%, 18%) !important;
    }

    richlistitem.download-state[selected]:not(:hover, :focus-within) {
        background: hsl(230, 5%, 15%) !important;
    }

    richlistitem.download-state[state="1"]:not([exists]) .downloadTarget {
        color: var(--organizer-deemphasized-color);
    }

    richlistitem.download-state .downloadDetails {
        opacity: 1 !important;
        color: var(--organizer-deemphasized-color);
    }
}

/* overflow menu */
#widget-overflow {
    --arrowpanel-border-color: unset !important;
}

#widget-overflow-mainView .panel-subview-body {
    padding-bottom: 0 !important;
}

/* grid overflow menu (i don't have an overflow menu at all thanks to the toolbar button slider script. but just in case) */
/* :root:not([customizing]) #widget-overflow-mainView {
    min-width: 370px !important;
}

:root:not([customizing]) #widget-overflow-mainView>.panel-subview-body {
    padding: 4px !important;
}

:root:not([customizing]) .widget-overflow-list {
    display: grid;
    grid-template-areas: "a a a a a a a a a a a a";
    grid-auto-columns: auto;
}

:root:not([customizing]) #widget-overflow-mainView[visible] .widget-overflow-list {
    max-width: 370px
}

:root:not([customizing]) #widget-overflow-mainView~panelview[visible] {
    max-width: unset !important;
}

:root:not([customizing]) .widget-overflow-list>* {
    padding-block: 8px !important;
}

:root:not([customizing]) .widget-overflow-list>#search-container {
    grid-area: s
}

:root:not([customizing]) .widget-overflow-list .subviewbutton-nav::after,
:root:not([customizing]) .widget-overflow-list .toolbarbutton-text {
    display: none
}

:root:not([customizing]) .widget-overflow-list .toolbarbutton-1 {
    appearance: none !important;
    margin: 2px !important;
    padding: 0 !important;
    -moz-box-pack: center !important;
    display: -moz-box !important;
    border-radius: var(--toolbarbutton-border-radius) !important;
    width: 28px !important;
    height: 28px !important;
}

:root:not([customizing]) .widget-overflow-list .toolbarbutton-1 .toolbarbutton-icon {
    padding: 6px !important;
    width: calc(2 * var(--toolbarbutton-inner-padding) + 16px) !important;
    height: calc(2 * var(--toolbarbutton-inner-padding) + 16px) !important;
}

:root:not([customizing]) .widget-overflow-list {
    width: 370px !important;
}

:root:not([customizing]) #widget-overflow-mainView .panel-subview-body {
    width: 370px !important;
}

:root:not([customizing]) #widget-overflow-mainView {
    min-width: 370px !important;
    max-width: 370px !important;
}

:root:not([customizing]) #widget-overflow {
    width: 370px !important;
}

.widget-overflow-arrowbox[pack="end"] {
    margin-right: 4.4px !important;
}

#widget-overflow-list .toolbarbutton-menu-dropmarker {
    display: none !important;
}

#widget-overflow {
    margin-right: -24.4px !important;
}

#widget-overflow .toolbarbutton-badge {
    margin: 0 !important;
    margin-inline-end: 0px !important;
} */

/* urlbar page action menu */
#pageActionPanel panelview {
    min-width: 18em !important;
}

#pageAction-panel-builtInSeparator {
    display: none;
}

/* extension notification popup (on appmenu button) */
#extension-new-tab-notification-description .text-link:not(:empty) {
    margin-inline: 6px !important;
}

#invalid-form-popup {
    margin-inline-start: 0 !important;
    margin-top: 65px !important;
}

#invalid-form-popup description {
    white-space: nowrap !important;
    margin-block: 0 !important;
}

.menu-right {
    margin-inline-end: 0 !important;
}

#identity-popup,
#permission-popup,
#protections-popup {
    --panel-separator-margin: 4px !important;
}

#protections-popup-no-trackers-found-description {
    margin: 3em 5em !important;
}

/* ugly small menu separators */
#widget-overflow-mainView > toolbarseparator,
#widget-overflow-mainView > .panel-subview-body > toolbarseparator,
.PanelUI-subView toolbarseparator,
.cui-widget-panelview menuseparator,
.cui-widget-panel toolbarseparator {
    margin-inline: 4px !important;
}

.panel-footer.panel-footer-menulike {
    margin-inline: 4px !important;
    margin-bottom: 4px !important;
    border-top: 1px solid var(--panel-separator-color);
}

#identity-popup:is([connection="file"], [connection="chrome"]) #identity-popup-security-button {
    margin-bottom: 2px !important;
}

#identity-popup-security-httpsonlymode-menulist,
#identity-popup-security-httpsonlymode-menulist menupopup {
    width: 11em !important;
}

#identity-popup-security-httpsonlymode-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-bottom: 8px !important;
}

#identity-popup-security-httpsonlymode-info > description {
    margin-block: 0 !important;
}

.permission-popup-section {
    padding-bottom: 8px !important;
}

#permission-popup-permissions-content {
    padding-inline: 12px 4px !important;
}

#identity-popup-securityView-body {
    padding-block: 4px 8px;
}

#permission-popup-mainView-panel-header,
#identity-popup-mainView-panel-header,
#protections-popup-mainView-panel-header {
    min-height: 44px !important;
}

.popup-notification-description {
    font-size: 1.1em !important;
    line-height: 1.1em !important;
    font-weight: normal !important;
}

#eom-mainView-panel-header,
#permission-popup-mainView-panel-header,
#protections-popup-mainView-panel-header {
    min-height: 44px !important;
}

:is(#identity-popup-mainView-panel-header, #eom-mainView-panel-header, #permission-popup-mainView-panel-header, #protections-popup-mainView-panel-header)
    :is(label, description) {
    font-size: 1.1em !important;
    line-height: 1.1em !important;
    font-weight: var(--uc-font-weight-bold, 600) !important;
    margin: 0 !important;
}

.panel-header > h1 {
    font-size: 1.1em !important;
    line-height: 1.1em !important;
    font-weight: var(--uc-font-weight-bold, 600) !important;
}

.popup-notification-description {
    margin-block: 1px 8px !important;
}

#addon-webext-perm-list,
#addon-webext-perm-single-entry {
    margin-block-start: 6px !important;
}

:is(#identity-popup-mainView-panel-header, #permission-popup-mainView-panel-header, #protections-popup-mainView-panel-header)
    span,
.protections-popup-tp-switch-on-header,
.protections-popup-tp-switch-off-header {
    font-weight: inherit !important;
}

#eom-mainView-panel-header-span {
    font-weight: inherit !important;
}

#editBookmarkPanelTitle {
    font-size: 14px !important;
}

#editBookmarkPanel > .panel-header {
    padding-block: 6px 1px !important;
}

#identity-popup-securityView .identity-popup-security-content,
.identity-popup-section,
.permission-popup-section,
.protections-popup-section {
    margin-inline: 4px;
}

#geo-access-indicator-item,
#blocked-popup-indicator-item {
    font-size: 0.9em !important;
    font-weight: var(--uc-font-weight-thin) !important;
    min-height: 20px !important;
    background: url(chrome://userchrome/content/notifications/popup-subitem.svg) left center
        no-repeat;
    margin-inline-start: 22px !important;
    padding-inline-start: 12px !important;
    -moz-context-properties: fill, fill-opacity;
    fill: currentColor !important;
    color: var(--panel-description-color) !important;
}

#protections-popup-sendReportView-heading,
#protections-popup-sendReportView-body {
    margin: var(--arrowpanel-menuitem-margin) !important;
    padding-inline: calc(var(--arrowpanel-menuitem-padding) * 2) !important;
}

/* panic button panel */
#PanelUI-panic-timeframe {
    padding: 8px !important;
    padding-bottom: 12px !important;
    margin: 4px !important;
}

#panic-button-success-icon,
#PanelUI-panic-timeframe-icon {
    filter: hue-rotate(-13deg);
}

#PanelUI-panic-mainDesc,
#PanelUI-panic-actionlist-main-label {
    margin-bottom: 6px !important;
}

.PanelUI-panic-actionlist {
    margin-bottom: 4px !important;
    filter: brightness(1.5);
}

#PanelUI-panic-warning {
    color: var(--warning-color) !important;
    margin-top: 12px !important;
}

.eom-addon-button[message-type="warning"]:not([disabled], [open]):is(:hover, :focus-visible) {
    background-color: var(--eom-warning-bg-hover) !important;
}

.eom-addon-button[message-type="warning"]:not([disabled]):is([open], :hover:active) {
    background-color: var(--eom-warning-bg-active) !important;
}

.eom-addon-button[message-type="error"]:not([disabled], [open]):is(:hover, :focus-visible) {
    background-color: var(--eom-error-bg-hover) !important;
}

.eom-addon-button[message-type="error"]:not([disabled]):is([open], :hover:active) {
    background-color: var(--eom-error-bg-active) !important;
}

/* add icons to some panel subviewbuttons */
#identity-popup-clear-sitedata-button {
    list-style-image: url(chrome://userchrome/content/skin/forget.svg);
    /* list-style-image: url(chrome://userchrome/content/skin/3rdpartycookies-disabled.svg); */
    padding-inline-start: 7.5px !important;
}

#identity-popup-more-info {
    list-style-image: url(chrome://userchrome/content/info-filled.svg);
    padding-inline-start: 7.5px !important;
}

#identity-popup-clear-sitedata-button .toolbarbutton-icon,
#identity-popup-more-info .toolbarbutton-icon {
    width: 18px;
    height: 18px;
}

#identity-popup-clear-sitedata-button .toolbarbutton-text,
#identity-popup-more-info .toolbarbutton-text {
    padding-inline-start: 8px !important;
}

#protections-popup-settings-button {
    list-style-image: url(chrome://userchrome/content/settings.svg);
}

#protections-popup-show-report-button {
    list-style-image: url(chrome://userchrome/content/skin/dashboard.svg);
}

#protections-popup-settings-button .protections-popup-footer-icon,
#protections-popup-show-report-button .protections-popup-footer-icon {
    width: 16px;
    height: 16px;
}

#protections-popup-settings-button .protections-popup-footer-button-label,
#protections-popup-show-report-button .protections-popup-footer-button-label {
    padding-inline-start: 8px !important;
}
